<!DOCTYPE html>
<html>
<head>
	<title>網址識別工具</title>
</head>
<body style="background-color:powderblue">
	<h3 align="center">原網址: <input id="urlTextBox" size="100" type="text"><br>
	<br>
	<button onclick="convert()">轉換</button></h3>
	<h3 align="center">轉換後的網址: <input id="resultTextBox" size="100" type="text"><br>
	<br>
	<button disabled id="goHentai" onclick="referrerHentai()">轉對了嗎?發車嘍</button></h3>
	
	<script>
	function convert() {
		document.getElementById("resultTextBox").value = '';
	    document.getElementById("goHentai").setAttribute("disabled",'');
		
	    var x = document.getElementById("urlTextBox").value;
	    var result = '';
	   
		if (x.length == 0) { alert('未輸入網址'); return;} 
		if (!x.startsWith("http")) if (!confirm('原網址非http開頭，請確認是否繼續')) return;
	   
		for (var i = 0; i < x.length; i++) {
			var charInt = x.charCodeAt(i);
	        if (charInt == 37) { i += 2; continue; }
	        if (charInt == 46 ||charInt == 47 || charInt== 58 || (charInt >= 48 && charInt <= 57) || (charInt >= 65 && charInt <= 90) || 
			(charInt >= 97 && charInt <= 122) && (charInt < 0x4E00 || charInt > 0x9FA5)) result += String.fromCharCode(charInt);
	    }   
	   
	    if (result.length != 0) {
			document.getElementById("resultTextBox").value = result;
	        document.getElementById("goHentai").removeAttribute("disabled");
	    }
	}

	function referrerHentai() {
	   window.open( document.getElementById("resultTextBox").value);
	}
	</script>
</body>
</html>